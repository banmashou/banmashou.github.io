<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>项目创建 | 斑马兽</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="斑马兽">
    
    <link rel="preload" href="/assets/css/0.styles.8f93fd0e.css" as="style"><link rel="preload" href="/assets/js/app.ca482ce6.js" as="script"><link rel="preload" href="/assets/js/4.e4d66431.js" as="script"><link rel="preload" href="/assets/js/37.935ba9e8.js" as="script"><link rel="prefetch" href="/assets/js/10.b8426513.js"><link rel="prefetch" href="/assets/js/11.63ff5362.js"><link rel="prefetch" href="/assets/js/12.c2d1527e.js"><link rel="prefetch" href="/assets/js/13.a20f78cb.js"><link rel="prefetch" href="/assets/js/14.90f22846.js"><link rel="prefetch" href="/assets/js/15.72f816e6.js"><link rel="prefetch" href="/assets/js/16.6ee469f1.js"><link rel="prefetch" href="/assets/js/17.82d1967d.js"><link rel="prefetch" href="/assets/js/18.9ab77a24.js"><link rel="prefetch" href="/assets/js/19.55c25ae5.js"><link rel="prefetch" href="/assets/js/2.45e53b8b.js"><link rel="prefetch" href="/assets/js/20.7b871faf.js"><link rel="prefetch" href="/assets/js/21.0566bcc7.js"><link rel="prefetch" href="/assets/js/22.543e912c.js"><link rel="prefetch" href="/assets/js/23.5f6c721d.js"><link rel="prefetch" href="/assets/js/24.2000941f.js"><link rel="prefetch" href="/assets/js/25.8405abc2.js"><link rel="prefetch" href="/assets/js/26.d2e7d884.js"><link rel="prefetch" href="/assets/js/27.f615a8f0.js"><link rel="prefetch" href="/assets/js/28.8e00aede.js"><link rel="prefetch" href="/assets/js/29.e3c15d88.js"><link rel="prefetch" href="/assets/js/3.b1fe84e4.js"><link rel="prefetch" href="/assets/js/30.3d9e4bd8.js"><link rel="prefetch" href="/assets/js/31.f6ee0328.js"><link rel="prefetch" href="/assets/js/32.2d4c8c59.js"><link rel="prefetch" href="/assets/js/33.9172582e.js"><link rel="prefetch" href="/assets/js/34.927b98da.js"><link rel="prefetch" href="/assets/js/35.81aff24e.js"><link rel="prefetch" href="/assets/js/36.807a0999.js"><link rel="prefetch" href="/assets/js/38.19964381.js"><link rel="prefetch" href="/assets/js/5.c73eadd7.js"><link rel="prefetch" href="/assets/js/6.366812d0.js"><link rel="prefetch" href="/assets/js/7.a3e66da6.js"><link rel="prefetch" href="/assets/js/8.2a068be5.js"><link rel="prefetch" href="/assets/js/9.eef1310c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f93fd0e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">斑马兽</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习资料" class="dropdown-title"><span class="title">学习资料</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习资料" class="mobile-dropdown-title"><span class="title">学习资料</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/curriculum/html/basics/basics.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/guide/curriculum/css/basics/basics.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/guide/vue/vue.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/guide/vuex/vuex.html" class="nav-link">
  VUEX
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具软件" class="dropdown-title"><span class="title">工具软件</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具软件" class="mobile-dropdown-title"><span class="title">工具软件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/tool/vscode/basic.html" class="nav-link">
  VSCODE
</a></li></ul></div></div><div class="nav-item"><a href="/guide/bug/bug.html" class="nav-link">
  项目经验
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端面试" class="dropdown-title"><span class="title">前端面试</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端面试" class="mobile-dropdown-title"><span class="title">前端面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/interview/html/html.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/guide/interview/css/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/guide/interview/js/js.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/guide/interview/vue/vue.html" class="nav-link">
  VUE
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习资料" class="dropdown-title"><span class="title">学习资料</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习资料" class="mobile-dropdown-title"><span class="title">学习资料</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/curriculum/html/basics/basics.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/guide/curriculum/css/basics/basics.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/guide/vue/vue.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/guide/vuex/vuex.html" class="nav-link">
  VUEX
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具软件" class="dropdown-title"><span class="title">工具软件</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具软件" class="mobile-dropdown-title"><span class="title">工具软件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/tool/vscode/basic.html" class="nav-link">
  VSCODE
</a></li></ul></div></div><div class="nav-item"><a href="/guide/bug/bug.html" class="nav-link">
  项目经验
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端面试" class="dropdown-title"><span class="title">前端面试</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端面试" class="mobile-dropdown-title"><span class="title">前端面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/interview/html/html.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/guide/interview/css/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/guide/interview/js/js.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/guide/interview/vue/vue.html" class="nav-link">
  VUE
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/guide/vue/vue.html" aria-current="page" class="active sidebar-link">vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/vue/vue.html#项目创建" class="sidebar-link">项目创建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/vue/vue.html#软件安装" class="sidebar-link">软件安装</a></li><li class="sidebar-sub-header"><a href="/guide/vue/vue.html#创建项目" class="sidebar-link">创建项目</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/vue/vue.html#跨域请求" class="sidebar-link">跨域请求</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/vue/vue.html#代理方式" class="sidebar-link">代理方式</a></li><li class="sidebar-sub-header"><a href="/guide/vue/vue.html#axios" class="sidebar-link">axios</a></li><li class="sidebar-sub-header"><a href="/guide/vue/vue.html#vite" class="sidebar-link">vite</a></li><li class="sidebar-sub-header"><a href="/guide/vue/vue.html#laravel" class="sidebar-link">laravel</a></li><li class="sidebar-sub-header"><a href="/guide/vue/vue.html#csrf-token" class="sidebar-link">csrf-token</a></li></ul></li></ul></li><li><a href="/guide/vue/vue-router.html" class="sidebar-link">vue-router</a></li><li><a href="/guide/vue/vite.html" class="sidebar-link">vite</a></li><li><a href="/guide/vue/optimize_packge.html" class="sidebar-link">优化打包</a></li><li><a href="/guide/vue/plug-in.html" class="sidebar-link">插件扩展</a></li><li><a href="/guide/vue/tsx.html" class="sidebar-link">tsx</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="项目创建"><a href="#项目创建" class="header-anchor">#</a> 项目创建</h2> <h3 id="软件安装"><a href="#软件安装" class="header-anchor">#</a> 软件安装</h3> <p><strong>NODE</strong></p> <p>请先访问 https://nodejs.org/zh-cn/安装NODE（安装LTS版本即可）</p> <h4 id="淘宝镜像"><a href="#淘宝镜像" class="header-anchor">#</a> 淘宝镜像</h4> <p>使用<a href="https://developer.aliyun.com/mirror/NPM?from=tnpm" target="_blank" rel="noopener noreferrer">淘宝镜像<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>(opens new window)可以快速安装NPM依赖包</p> <div class="language- extra-class"><pre class="language-text"><code>npm install -g cnpm --registry=https://registry.npm.taobao.org
</code></pre></div><p><strong>yarn</strong></p> <p>Yarn 是与 npm 类似的包管理工具，Yarn 缓存了每个下载过的包，所以再次使用时无需重复下载。 同时利用并行下载以最大化资源利用率，因此安装速度更快。</p> <p>安装 yarn</p> <div class="language- extra-class"><pre class="language-text"><code>npm install -g yarn
</code></pre></div><h3 id="创建项目"><a href="#创建项目" class="header-anchor">#</a> 创建项目</h3> <p>vite</p> <p>下面是使用 vite 构建基于 vue-ts 模板的项目 banmashou</p> <div class="language- extra-class"><pre class="language-text"><code>yarn create vite banmashou --template vue-ts
</code></pre></div><h2 id="跨域请求"><a href="#跨域请求" class="header-anchor">#</a> 跨域请求</h2> <p>跨越请求的主要问题是携带 cookie，下面我们来解决 vue 的跨越请求问题。</p> <h3 id="代理方式"><a href="#代理方式" class="header-anchor">#</a> 代理方式</h3> <p>如果后台要使用<code>cookie</code>进行权限验证。这时就需要前台可以传递cookie，我们使用前台代理完成这个功能，使用这种方式后台不需要什么配置。</p> <h3 id="axios"><a href="#axios" class="header-anchor">#</a> axios</h3> <p>请求一般使用axios 发送，下面是对 url 的基本配置</p> <blockquote><p><span style="font-size:22px;">不需要设置 axios 的 withCredentials 属性为 true</span></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>//请求拦截
instance.interceptors.request.use(
  function (config) {
  	//如果请求不是以 / 开始时添加 /api 前缀
    config.baseURL = config.url[0] == '/' ? '' : '/api'
...    
</code></pre></div><h3 id="vite"><a href="#vite" class="header-anchor">#</a> vite</h3> <p>下面是重点即在 vite.config.js 中配置代理，解决跨越的问题。</p> <div class="language- extra-class"><pre class="language-text"><code>export default defineConfig({
  ...
  //开发环境设置
  server: {
      proxy: {
      	//laravel 中获取 csrf-token 的接口
        '/sanctum': {
            //将/api访问转换为target
            target: 'http://banmashou.test/sanctum',
            changeOrigin: true,
            rewrite: path =&gt; path.replace(/^\/sanctum/, ''),
          },
         '/api': {
              //将/api访问转换为target
              target: 'http://banmashou.test/api',
              //跨域请求携带cookie
              changeOrigin: true,
              //url 重写删除`/api`
              rewrite: path =&gt; path.replace(/^\/api/, ''),
          },
      },
  },
})
</code></pre></div><h3 id="laravel"><a href="#laravel" class="header-anchor">#</a> laravel</h3> <p>因为上面是使用代理解决跨域问题，所以如果后台使用 laravel 不需要进行配置。下面对几个文件进行说明</p> <p><strong>.env</strong></p> <p>修改 <code>.env</code> 来对域名等进行配置</p> <div class="language- extra-class"><pre class="language-text"><code>APP_URL=http://banmashou.test
</code></pre></div><h3 id="csrf-token"><a href="#csrf-token" class="header-anchor">#</a> csrf-token</h3> <p>因为是使用 cookie 请求 laravel 所以后台会进行 csrf 验证，需要先获取 csrf-token 的 cookie。axios 等框架会自动携带这个 cookie 完成后台的 csrf 验证。</p> <p>下面是登录操作的代码</p> <div class="language- extra-class"><pre class="language-text"><code>...
const login = async () =&gt; {
    axios.get('/sanctum/csrf-cookie').then(async response =&gt; {
        await axios.login(form)
        ...
    })
}
...
</code></pre></div><p>下面是 loginController 控制器文件，我们以 api/login 路由访问。需要使用 web 的 guard 完成session登录。</p> <div class="language- extra-class"><pre class="language-text"><code>...
Auth::guard('web')-&gt;login($user);
...
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/guide/vue/vue-router.html">
        vue-router
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ca482ce6.js" defer></script><script src="/assets/js/4.e4d66431.js" defer></script><script src="/assets/js/37.935ba9e8.js" defer></script>
  </body>
</html>
