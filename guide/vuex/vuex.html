<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1. Vuex 概述 | 斑马兽</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="斑马兽">
    
    <link rel="preload" href="/assets/css/0.styles.8f93fd0e.css" as="style"><link rel="preload" href="/assets/js/app.ca482ce6.js" as="script"><link rel="preload" href="/assets/js/4.e4d66431.js" as="script"><link rel="preload" href="/assets/js/38.19964381.js" as="script"><link rel="prefetch" href="/assets/js/10.b8426513.js"><link rel="prefetch" href="/assets/js/11.63ff5362.js"><link rel="prefetch" href="/assets/js/12.c2d1527e.js"><link rel="prefetch" href="/assets/js/13.a20f78cb.js"><link rel="prefetch" href="/assets/js/14.90f22846.js"><link rel="prefetch" href="/assets/js/15.72f816e6.js"><link rel="prefetch" href="/assets/js/16.6ee469f1.js"><link rel="prefetch" href="/assets/js/17.82d1967d.js"><link rel="prefetch" href="/assets/js/18.9ab77a24.js"><link rel="prefetch" href="/assets/js/19.55c25ae5.js"><link rel="prefetch" href="/assets/js/2.45e53b8b.js"><link rel="prefetch" href="/assets/js/20.7b871faf.js"><link rel="prefetch" href="/assets/js/21.0566bcc7.js"><link rel="prefetch" href="/assets/js/22.543e912c.js"><link rel="prefetch" href="/assets/js/23.5f6c721d.js"><link rel="prefetch" href="/assets/js/24.2000941f.js"><link rel="prefetch" href="/assets/js/25.8405abc2.js"><link rel="prefetch" href="/assets/js/26.d2e7d884.js"><link rel="prefetch" href="/assets/js/27.f615a8f0.js"><link rel="prefetch" href="/assets/js/28.8e00aede.js"><link rel="prefetch" href="/assets/js/29.e3c15d88.js"><link rel="prefetch" href="/assets/js/3.b1fe84e4.js"><link rel="prefetch" href="/assets/js/30.3d9e4bd8.js"><link rel="prefetch" href="/assets/js/31.f6ee0328.js"><link rel="prefetch" href="/assets/js/32.2d4c8c59.js"><link rel="prefetch" href="/assets/js/33.9172582e.js"><link rel="prefetch" href="/assets/js/34.927b98da.js"><link rel="prefetch" href="/assets/js/35.81aff24e.js"><link rel="prefetch" href="/assets/js/36.807a0999.js"><link rel="prefetch" href="/assets/js/37.935ba9e8.js"><link rel="prefetch" href="/assets/js/5.c73eadd7.js"><link rel="prefetch" href="/assets/js/6.366812d0.js"><link rel="prefetch" href="/assets/js/7.a3e66da6.js"><link rel="prefetch" href="/assets/js/8.2a068be5.js"><link rel="prefetch" href="/assets/js/9.eef1310c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f93fd0e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">斑马兽</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习资料" class="dropdown-title"><span class="title">学习资料</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习资料" class="mobile-dropdown-title"><span class="title">学习资料</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/curriculum/html/basics/basics.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/guide/curriculum/css/basics/basics.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/guide/vue/vue.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/guide/vuex/vuex.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  VUEX
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具软件" class="dropdown-title"><span class="title">工具软件</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具软件" class="mobile-dropdown-title"><span class="title">工具软件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/tool/vscode/basic.html" class="nav-link">
  VSCODE
</a></li></ul></div></div><div class="nav-item"><a href="/guide/bug/bug.html" class="nav-link">
  项目经验
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端面试" class="dropdown-title"><span class="title">前端面试</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端面试" class="mobile-dropdown-title"><span class="title">前端面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/interview/html/html.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/guide/interview/css/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/guide/interview/js/js.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/guide/interview/vue/vue.html" class="nav-link">
  VUE
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习资料" class="dropdown-title"><span class="title">学习资料</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习资料" class="mobile-dropdown-title"><span class="title">学习资料</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/curriculum/html/basics/basics.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/guide/curriculum/css/basics/basics.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/guide/vue/vue.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/guide/vuex/vuex.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  VUEX
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具软件" class="dropdown-title"><span class="title">工具软件</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具软件" class="mobile-dropdown-title"><span class="title">工具软件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/tool/vscode/basic.html" class="nav-link">
  VSCODE
</a></li></ul></div></div><div class="nav-item"><a href="/guide/bug/bug.html" class="nav-link">
  项目经验
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端面试" class="dropdown-title"><span class="title">前端面试</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端面试" class="mobile-dropdown-title"><span class="title">前端面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/interview/html/html.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/guide/interview/css/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/guide/interview/js/js.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/guide/interview/vue/vue.html" class="nav-link">
  VUE
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/guide/vuex/vuex.html" aria-current="page" class="active sidebar-link">vuex</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_1-vuex-概述" class="sidebar-link">1. Vuex 概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_1-1-组件之间共享数据的方式" class="sidebar-link">1.1 组件之间共享数据的方式</a></li><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_1-2-vuex-是什么" class="sidebar-link">1.2 Vuex 是什么</a></li><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_1-3-使用-vuex-统一管理状态的好处" class="sidebar-link">1.3 使用 Vuex 统一管理状态的好处</a></li><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_1-4-什么样的数据适合存储到-vuex-中" class="sidebar-link">1.4 什么样的数据适合存储到 Vuex 中</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_2-vuex-的基本使用" class="sidebar-link">2. Vuex 的基本使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_2-1-安装-vuex-依赖包" class="sidebar-link">2.1 安装 vuex 依赖包</a></li><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_2-2-导入-vuex-包" class="sidebar-link">2.2 导入 vuex 包</a></li><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_2-3-创建-store-对象" class="sidebar-link">2.3 创建 store 对象</a></li><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_2-4-将-store-对象挂载到-vue-实例中" class="sidebar-link">2.4 将 store 对象挂载到 vue 实例中</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_3-vuex-的核心概念" class="sidebar-link">3. Vuex 的核心概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_3-1-核心概念概述" class="sidebar-link">3.1 核心概念概述</a></li><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_3-2-state" class="sidebar-link">3.2 State</a></li><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_3-3-mutation" class="sidebar-link">3.3 Mutation</a></li><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_3-4-action" class="sidebar-link">3.4 Action</a></li><li class="sidebar-sub-header"><a href="/guide/vuex/vuex.html#_3-5-getter" class="sidebar-link">3.5 Getter</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1-vuex-概述"><a href="#_1-vuex-概述" class="header-anchor">#</a> 1. Vuex 概述</h2> <h3 id="_1-1-组件之间共享数据的方式"><a href="#_1-1-组件之间共享数据的方式" class="header-anchor">#</a> 1.1 组件之间共享数据的方式</h3> <p>父向子传值：<font color="red">v-bind 属性绑定</font></p> <p>子向父传值：<font color="red">v-on 事件绑定</font></p> <p>兄弟组件之间共享数据：<font color="red">EventBus</font></p> <ul><li>$on		接收数据的那个组件</li> <li>$emit     发送数据的那个组件</li></ul> <h3 id="_1-2-vuex-是什么"><a href="#_1-2-vuex-是什么" class="header-anchor">#</a> 1.2 Vuex 是什么</h3> <p><font color="red">Vuex</font> 是实现组件全局状态（ 数据 ）管理的一种机制，可以方便的实现组件之间数据的共享。</p> <h3 id="_1-3-使用-vuex-统一管理状态的好处"><a href="#_1-3-使用-vuex-统一管理状态的好处" class="header-anchor">#</a> 1.3 使用 Vuex 统一管理状态的好处</h3> <ol><li>能够在 Vuex 中集中管理共享的数据，易于开发和后期维护</li> <li>那够高效地实现组件之间的数据共享，提高开发效率</li> <li>存储在 vuex 中的数据都是响应式的，能够实时保持数据与页面的同步</li></ol> <h3 id="_1-4-什么样的数据适合存储到-vuex-中"><a href="#_1-4-什么样的数据适合存储到-vuex-中" class="header-anchor">#</a> 1.4 什么样的数据适合存储到 Vuex 中</h3> <p>一般情况下，只有组件之间共享的数据，才有必要存储到 vuex 中；对于组件中的私有数据，依旧存储在组件自身的 data 中即可。</p> <h2 id="_2-vuex-的基本使用"><a href="#_2-vuex-的基本使用" class="header-anchor">#</a> 2. Vuex 的基本使用</h2> <h3 id="_2-1-安装-vuex-依赖包"><a href="#_2-1-安装-vuex-依赖包" class="header-anchor">#</a> 2.1 安装 vuex 依赖包</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>npm install vuex <span class="token operator">--</span>save
</code></pre></div><h3 id="_2-2-导入-vuex-包"><a href="#_2-2-导入-vuex-包" class="header-anchor">#</a> 2.2 导入 vuex 包</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-3-创建-store-对象"><a href="#_2-3-创建-store-对象" class="header-anchor">#</a> 2.3 创建 store 对象</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-4-将-store-对象挂载到-vue-实例中"><a href="#_2-4-将-store-对象挂载到-vue-实例中" class="header-anchor">#</a> 2.4 将 store 对象挂载到 vue 实例中</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
	<span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">,</span>
	router<span class="token punctuation">,</span>
	<span class="token comment">// 将创建的共享数据对象，挂载到 Vue 实例中</span>
 	<span class="token comment">// 所有的组件，就可以直接从 store 中获取全局的数据了</span>
	store
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_3-vuex-的核心概念"><a href="#_3-vuex-的核心概念" class="header-anchor">#</a> 3. Vuex 的核心概念</h2> <h3 id="_3-1-核心概念概述"><a href="#_3-1-核心概念概述" class="header-anchor">#</a> 3.1 核心概念概述</h3> <p>Vuex 中的主要核心概念如下：</p> <ul><li><strong>State</strong></li> <li><strong>Mutation</strong></li> <li><strong>Action</strong></li> <li><strong>Getter</strong></li></ul> <h3 id="_3-2-state"><a href="#_3-2-state" class="header-anchor">#</a> 3.2 State</h3> <p>State 提供唯一的公共数据源，所有共享的数据都要统一放到 Store 的 State 中进行存储。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 创建 store 数据源，提供唯一公共数据</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>组件访问 State 中的数据的<font color="red">第一种方式</font>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>全局数据名称
</code></pre></div><p>组件访问 State 中的数据的<font color="red">第二种方式</font></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1. 从 vuex 中按需导入 mapState 函数</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
</code></pre></div><p>通过刚才导入的 mapState 函数，将当前组件需要的全局数据，映射为当前组件的 computed 计算属性：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 2. 将全局数据，映射为当前组件的计算属性</span>
<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-3-mutation"><a href="#_3-3-mutation" class="header-anchor">#</a> 3.3 Mutation</h3> <p>Mutation 用于变更 Store 中的数据。</p> <p>注意：<font color="red">只有 mutations里的函数，才有权利修改 state 的数据</font></p> <p>注意：<strong>mutations里不能包含异步操作</strong>。</p> <ol><li>只能通过 mutation 变更 Store 数据，不可以直接操作 Store 中的数据。</li> <li>通过这种方式虽然操作起来稍微繁琐一些，但是可以集中监控所有数据的变化。、</li></ol> <p><strong>this.$store.commit() 触发 mutations 的<font color="red">第一种方式</font></strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 定义 Mutation</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 变更状态</span>
            state<span class="token punctuation">.</span>count<span class="token operator">++</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 触发 mutation</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 触发 mutations 的第一种方式</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>可以在触发 mutations 时<font color="red">传递参数</font></strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 定义 Mutation</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">addN</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> step</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 变更状态</span>
            state<span class="token punctuation">.</span>count <span class="token operator">+=</span> step
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 触发 mutation</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	handle2 <span class="token punctuation">{</span>
		<span class="token comment">// 在调用 commit 函数，</span>
		<span class="token comment">// 触发 mutations 时携带参数</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'addN'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>触发 mutations 的<font color="red">第二种方式</font></strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1. 从 vuex 中按需导入 mapMutations 函数</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapMutations <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
</code></pre></div><p>通过刚才导入的 mapMutations 函数，将需要的 mutations 函数，映射为当前组件的 methods 方法：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 2. 将指定的 mutations 函数，映射为当前组件的 methods 函数</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'add'</span><span class="token punctuation">,</span> <span class="token string">'addN'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-4-action"><a href="#_3-4-action" class="header-anchor">#</a> 3.4 Action</h3> <p>Action 用于处理异步任务。</p> <p>如果通过异步操作变更数据，必须通过 Action，而不能使用 Mutation，但是在 Action 中还是要通过触发 Mutation 的方式间接变更数据。</p> <p>注意： <font color="red">在Actions 中不能直接修改 state中的数据，要通过 mutations修改。</font></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 定义 Action</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// ...省略其他代码</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>count<span class="token operator">++</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">addAsync</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>this.$store.dispatch 触发 Actions 的<font color="red">第一种方式</font></strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 触发 Action</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 触发 actions 的第一种方式</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'addAsync'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>触发 actions 异步任务时<font color="red">携带参数</font></strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 定义 Action</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// ...省略其他代码</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">addN</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> step</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>count <span class="token operator">+=</span> step
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">addNAsync</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> step</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'addN'</span><span class="token punctuation">,</span> step<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 触发 Action</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 在调用 dispatch 函数，</span>
        <span class="token comment">// 触发 actions 时携带参数</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'addNAsync'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>触发 actions 的<font color="red">第二种方式</font></strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1. 从 vuex 中按需导入 mapActions 函数</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
</code></pre></div><p>通过刚才导入的 mapActions 函数，将需要的 actions 函数，映射为当前组件的 methods 方法：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 2. 将指定的 actions 函数，映射为当前组件的 methods 函数</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'addASync'</span><span class="token punctuation">,</span> <span class="token string">'addNAsync'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-5-getter"><a href="#_3-5-getter" class="header-anchor">#</a> 3.5 Getter</h3> <p>Getter 用于对 Store 中的数据进行加工处理形成新的数据。</p> <ol><li>Getter 可以对 Store 中已有的数据加工处理之后形成新的数据，类似 Vue 的计算属性。</li> <li>Store 中数据发送变化，Getter 的数据也会跟着变化。</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 定义 Getter</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">showNum</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">'当前最新的数据是【'</span><span class="token operator">+</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span><span class="token string">'】'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>使用 getters 的<font color="red">第一种方式</font></strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>名称
</code></pre></div><p><strong>使用 getters 的<font color="red">第二种方式</font></strong>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapGetters <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'showNum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ca482ce6.js" defer></script><script src="/assets/js/4.e4d66431.js" defer></script><script src="/assets/js/38.19964381.js" defer></script>
  </body>
</html>
